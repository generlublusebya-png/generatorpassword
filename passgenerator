// worker.js ‚Äì –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–∞—Ä–æ–ª–µ–π –æ—Ç lublusebya11.11 ¬∑ discord (–ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–µ—Ä–æ-–±–µ–ª—ã–π)
export default {
  async fetch(request) {
    const html = `<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–∞—Ä–æ–ª–µ–π –æ—Ç lublusebya11.11 ¬∑ discord</title>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI',Arial,sans-serif; transition:.2s; }
        body { min-height:100vh; display:flex; justify-content:center; align-items:center; padding:20px; }

        /* –¢—ë–º–Ω–∞—è —Ç–µ–º–∞ ‚Äì —Å–µ—Ä—ã–π —Ñ–æ–Ω, –±–µ–ª–∞—è –æ–±–≤–æ–¥–∫–∞ */
        body.dark {
            background: #2a2a2a;
            color: #f0f0f0;
        }
        .dark .card {
            background: #3a3a3a;
            border: 2px solid #ffffff;
        }
        .dark .settings-panel {
            background: #4a4a4a;
            border: 1px solid #ffffff;
        }
        .dark .password-item {
            background: #3a3a3a;
            border: 1px solid #ffffff;
            color: #f0f0f0;
        }
        .dark button.generate {
            background: #5a5a5a;
            color: white;
            border: 2px solid #ffffff;
            box-shadow: 0 4px 0 #333;
        }
        .dark .theme-btn {
            background: #4a4a4a;
            border: 2px solid #ffffff;
            color: #f0f0f0;
        }
        .dark .copy-all-btn {
            background: transparent;
            border: 2px solid #ffffff;
            color: #ffffff;
        }
        .dark .copy-all-btn:hover {
            background: #ffffff;
            color: #2a2a2a;
        }
        .dark .password-item:hover {
            background: #ffffff;
            color: #2a2a2a !important;
            border-color: #2a2a2a;
        }
        .dark .captcha-btn {
            background: #5a5a5a;
            border: 2px solid #ffffff;
            color: white;
        }
        .dark .captcha-btn:active {
            transform: translateY(2px);
        }
        /* –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ ‚Äì –±–µ–ª—ã–π —Ñ–æ–Ω, —Å–µ—Ä–∞—è –æ–±–≤–æ–¥–∫–∞ */
        body.light {
            background: #f5f5f5;
            color: #222;
        }
        .light .card {
            background: #ffffff;
            border: 2px solid #888;
        }
        .light .settings-panel {
            background: #f0f0f0;
            border: 1px solid #888;
        }
        .light .password-item {
            background: #ffffff;
            border: 1px solid #888;
            color: #222;
        }
        .light button.generate {
            background: #e0e0e0;
            color: #222;
            border: 2px solid #888;
            box-shadow: 0 4px 0 #aaa;
        }
        .light .theme-btn {
            background: #e0e0e0;
            border: 2px solid #888;
            color: #222;
        }
        .light .copy-all-btn {
            background: transparent;
            border: 2px solid #888;
            color: #222;
        }
        .light .copy-all-btn:hover {
            background: #888;
            color: white;
        }
        .light .password-item:hover {
            background: #888;
            color: white !important;
        }
        .light .captcha-btn {
            background: #e0e0e0;
            border: 2px solid #888;
            color: #222;
        }
        .light .captcha-btn:active {
            transform: translateY(2px);
        }

        .card {
            max-width: 900px;
            width: 100%;
            border-radius: 40px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        h1 {
            font-size: 28px;
            font-weight: 600;
        }
        body.dark h1 {
            color: #f0f0f0;
        }
        body.light h1 {
            color: #222;
        }

        .theme-btn {
            padding: 10px 20px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
        }

        .settings-panel {
            border-radius: 30px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .slider-group {
            margin-bottom: 25px;
        }

        .slider-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            font-size: 16px;
        }

        input[type=range] {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #555;
            -webkit-appearance: none;
            transition: background 0.2s; /* –ø–ª–∞–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–æ–Ω–∞ */
        }
        /* –°—Ç–∏–ª–∏ –¥–ª—è –ø–æ–ª–∑—É–Ω–∫–∞ (thumb) ‚Äì —É–±–∏—Ä–∞–µ–º –∫—Ä–∞—Å–Ω—ã–π, –¥–µ–ª–∞–µ–º —Å–µ—Ä—ã–π */
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #888; /* —Å–µ—Ä—ã–π */
            cursor: pointer;
            border: 2px solid white;
            transition: background 0.2s, transform 0.1s;
        }
        input[type=range]::-webkit-slider-thumb:hover {
            background: #aaa;
            transform: scale(1.1);
        }
        /* –î–ª—è Firefox */
        input[type=range]::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #888;
            cursor: pointer;
            border: 2px solid white;
            transition: background 0.2s, transform 0.1s;
        }
        input[type=range]::-moz-range-thumb:hover {
            background: #aaa;
            transform: scale(1.1);
        }

        /* –î–∏—Å–ø–ª–µ–π –∑–Ω–∞—á–µ–Ω–∏—è ‚Äì –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–µ—Ä—ã–π, –±–µ–∑ –∫—Ä–∞—Å–Ω–æ–≥–æ */
        .value-display {
            float: right;
            background: #888;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-weight: bold;
            transition: background 0.2s, color 0.2s;
        }
        body.light .value-display {
            background: #666;
            color: #fff;
        }

        .complexity {
            margin-top: 5px;
            font-size: 14px;
            color: #888;
            text-align: right;
            font-weight: bold;
        }

        .checkboxes {
            display: flex;
            gap: 20px;
            margin: 25px 0;
            flex-wrap: wrap;
        }

        .checkboxes label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            font-size: 16px;
        }

        .checkboxes input[type=checkbox] {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: #888; /* —Å–µ—Ä–æ-–±–µ–ª–∞—è –≥–∞–ª–æ—á–∫–∞ */
        }

        .captcha-container {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }

        .captcha-btn {
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.1s;
            width: auto;
            min-width: 300px;
            text-align: center;
        }

        .captcha-btn:active {
            transform: translateY(2px);
            box-shadow: none;
        }

        button.generate {
            width: 100%;
            padding: 18px;
            border-radius: 50px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.1s;
            margin-top: 10px;
        }

        button.generate:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        button.generate:active:not(:disabled) {
            transform: translateY(4px);
            box-shadow: none;
        }

        .passwords-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 12px;
            margin: 25px 0;
        }

        .password-item {
            padding: 15px;
            border-radius: 30px;
            text-align: center;
            font-family: monospace;
            font-size: 16px;
            cursor: pointer;
            word-break: break-all;
            transition: 0.1s;
        }

        .copy-all-btn {
            padding: 10px 20px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            margin-right: 10px;
        }

        .footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            color: #888;
            font-size: 14px;
        }

        .blink-text {
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            border-radius: 50px;
            animation: blink 1s infinite;
        }
        @keyframes blink {
            0% { background-color: black; color: white; }
            50% { background-color: white; color: black; }
            100% { background-color: black; color: white; }
        }
    </style>
</head>
<body class="dark">
    <div class="card">
        <div class="header">
            <h1>üîê –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–∞—Ä–æ–ª–µ–π –æ—Ç lublusebya11.11 ¬∑ discord</h1>
            <button class="theme-btn" id="themeToggle">üåì –°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É</button>
        </div>
        <div class="blink-text">‚ö†Ô∏è –í–ê–®–ò –î–ê–ù–ù–´–ï –ù–ò–ö–£–î–ê –ù–ï –°–õ–ò–í–ê–Æ–¢–°–Ø –ò –ù–ï –£–•–û–î–Ø–¢ –í –ò–ù–¢–ï–†–ù–ï–¢ ‚ö†Ô∏è</div>
        <div class="settings-panel">
            <div class="slider-group">
                <label>–î–ª–∏–Ω–∞ –ø–∞—Ä–æ–ª—è: <span class="value-display" id="lengthValue">16</span></label>
                <input type="range" id="lengthSlider" min="4" max="64" value="16" step="1">
                <div class="complexity" id="complexityLabel">–°—Ä–µ–¥–Ω–∏–π</div>
            </div>
            <div class="slider-group">
                <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–æ–ª–µ–π: <span class="value-display" id="countValue">5</span></label>
                <input type="range" id="countSlider" min="1" max="10" value="5" step="1">
            </div>
            <div class="checkboxes">
                <label><input type="checkbox" id="useUpper" checked> –ó–∞–≥–ª–∞–≤–Ω—ã–µ (A-Z)</label>
                <label><input type="checkbox" id="useLower" checked> –°—Ç—Ä–æ—á–Ω—ã–µ (a-z)</label>
                <label><input type="checkbox" id="useDigits" checked> –¶–∏—Ñ—Ä—ã (0-9)</label>
                <label><input type="checkbox" id="useSymbols" checked> –°–∏–º–≤–æ–ª—ã (!@#$%^&*)</label>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∞-–∫–∞–ø—á–∞ -->
            <div class="captcha-container">
                <button class="captcha-btn" id="captchaButton">üîí –ö–∞–ø—á–∞ –æ—Ç lublusebya11.11 ¬∑ discord</button>
            </div>

            <button class="generate" id="generateBtn" disabled>‚ö° –°–ì–ï–ù–ï–†–ò–†–û–í–ê–¢–¨ –ü–ê–†–û–õ–ò ‚ö°</button>
        </div>
        <div id="passwordsContainer" class="passwords-grid"></div>
        <div class="footer">
            <button class="copy-all-btn" id="copyAllBtn">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ</button>
            <span>–ö–ª–∏–∫–Ω–∏ –ø–æ –ø–∞—Ä–æ–ª—é, —á—Ç–æ–±—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</span>
        </div>
    </div>
    <script>
        (function() {
            function generatePasswords(o){
                let l = Math.min(64, Math.max(4, Number(o.length) || 16));
                let c = Math.min(10, Math.max(1, Number(o.count) || 5));
                let u = o.useUpper !== false;
                let d = o.useLower !== false;
                let n = o.useDigits !== false;
                let s = o.useSymbols !== false;
                if(!u && !d && !n && !s) u = d = n = s = true;
                let chars = '';
                if(u) chars += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
                if(d) chars += 'abcdefghijklmnopqrstuvwxyz';
                if(n) chars += '0123456789';
                if(s) chars += '!@#$%^&*()_+-=[]{};:,.?';
                let p = [];
                for(let j = 0; j < c; j++){
                    let pwd = '';
                    let r = new Uint32Array(l);
                    crypto.getRandomValues(r);
                    for(let i = 0; i < l; i++) pwd += chars[r[i] % chars.length];
                    p.push(pwd);
                }
                return p;
            }

            const ls = document.getElementById('lengthSlider');
            const lv = document.getElementById('lengthValue');
            const cs = document.getElementById('countSlider');
            const cv = document.getElementById('countValue');
            const uu = document.getElementById('useUpper');
            const ul = document.getElementById('useLower');
            const ud = document.getElementById('useDigits');
            const us = document.getElementById('useSymbols');
            const gb = document.getElementById('generateBtn');
            const con = document.getElementById('passwordsContainer');
            const cb = document.getElementById('copyAllBtn');
            const tt = document.getElementById('themeToggle');
            const complexity = document.getElementById('complexityLabel');
            const b = document.body;

            const captchaBtn = document.getElementById('captchaButton');
            let captchaPassed = false;

            // –ù–æ–≤–∞—è —à–∫–∞–ª–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ (–±–æ–ª–µ–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è)
            function updateComplexity(value) {
                const val = Number(value);
                if (val <= 5) complexity.textContent = '–°–∞–º—ã–π –ª–µ–≥—á–∞–π—à–∏–π';
                else if (val <= 8) complexity.textContent = '–û—á–µ–Ω—å –ª—ë–≥–∫–∏–π';
                else if (val <= 12) complexity.textContent = '–õ—ë–≥–∫–∏–π';
                else if (val <= 16) complexity.textContent = '–°—Ä–µ–¥–Ω–∏–π';
                else if (val <= 24) complexity.textContent = '–°–ª–æ–∂–Ω—ã–π';
                else if (val <= 40) complexity.textContent = '–û—á–µ–Ω—å —Å–ª–æ–∂–Ω—ã–π';
                else complexity.textContent = '–°—É–ø–µ—Ä —Å–ª–æ–∂–Ω—ã–π';
            }

            ls.addEventListener('input', () => {
                lv.textContent = ls.value;
                updateComplexity(ls.value);
            });
            cs.addEventListener('input', () => cv.textContent = cs.value);

            captchaBtn.addEventListener('click', function() {
                if (!captchaPassed) {
                    captchaPassed = true;
                    captchaBtn.textContent = '‚úì –ö–∞–ø—á–∞ –ø—Ä–æ–π–¥–µ–Ω–∞';
                    captchaBtn.disabled = true;
                    gb.disabled = false;
                }
            });

            function copyText(text, element, successMessage = '–°–ö–û–ü–ò–†–û–í–ê–ù–û!') {
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(text).then(() => {
                        const old = element.textContent;
                        element.textContent = '‚úì ' + successMessage;
                        setTimeout(() => element.textContent = old, 500);
                    }).catch(() => fallbackCopy(text, element, successMessage));
                } else {
                    fallbackCopy(text, element, successMessage);
                }
            }

            function fallbackCopy(text, element, successMessage) {
                const ta = document.createElement('textarea');
                ta.value = text;
                document.body.appendChild(ta);
                ta.select();
                document.execCommand('copy');
                document.body.removeChild(ta);
                const old = element.textContent;
                element.textContent = successMessage;
                setTimeout(() => element.textContent = old, 500);
            }

            function display(passwords) {
                con.innerHTML = '';
                passwords.forEach(pwd => {
                    let d = document.createElement('div');
                    d.className = 'password-item';
                    d.textContent = pwd;
                    d.onclick = function() {
                        copyText(pwd, this, '–°–ö–û–ü–ò–†–û–í–ê–ù–û!');
                    };
                    con.appendChild(d);
                });
            }

            function gen() {
                display(generatePasswords({
                    length: parseInt(ls.value),
                    count: parseInt(cs.value),
                    useUpper: uu.checked,
                    useLower: ul.checked,
                    useDigits: ud.checked,
                    useSymbols: us.checked
                }));
            }

            gb.addEventListener('click', gen);

            cb.addEventListener('click', () => {
                if (con.children.length === 0) return alert('–°–Ω–∞—á–∞–ª–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π –ø–∞—Ä–æ–ª–∏');
                let t = '';
                for (let e of con.children) t += e.textContent + '\\n';
                copyText(t, cb, '–í–°–ï –°–ö–û–ü–ò–†–û–í–ê–ù–û!');
            });

            tt.addEventListener('click', () => {
                b.classList.contains('dark') ? (b.classList.remove('dark'), b.classList.add('light')) : (b.classList.remove('light'), b.classList.add('dark'));
            });

            [uu, ul, ud, us].forEach(c => c.addEventListener('change', () => {
                if (!uu.checked && !ul.checked && !ud.checked && !us.checked) {
                    c.checked = true;
                    alert('–í—ã–±–µ—Ä–∏ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ç–∏–ø —Å–∏–º–≤–æ–ª–æ–≤');
                }
            }));

            updateComplexity(ls.value);
        })();
    </script>
</body>
</html>`;

    return new Response(html, {
      headers: {
        "Content-Type": "text/html;charset=UTF-8",
      },
    });
  },
};
